"use strict";var e=require("react");const t=e.createContext({stack:[],launchModal:()=>{},updateStack:()=>{},updateState:()=>{}});function r(){return e.useContext(t)}exports.ModalContextProvider=({children:r})=>{const[a,n]=e.useState([]),o={stack:a,launchModal:(e,t,r)=>{const o=Object.keys(t).reduce(((e,r)=>{const o=t[r];return e[r]=async e=>{const t=await o(e);return n(a.slice(0,-1)),t},e}),{});n([...a,{render:e,resolvers:o,onBackdropClickUse:r,state:{}}])},updateStack:n,updateState:e=>{const t=[...a];t[a.length-1].state={...e},n(t)}};return e.createElement(t.Provider,{value:o},r)},exports.ModalPort=({onModalLaunch:t,onModalClose:a,render:n})=>{const{stack:o}=r(),c=e.useMemo((()=>o.length>0?o[o.length-1]:null),[o]),s=e.useCallback((e=>{e.currentTarget===e.target&&c?.onBackdropClickUse&&c.resolvers[c.onBackdropClickUse](e)}),[c]);return e.useEffect((()=>{c?t&&t():a&&a()}),[c,t,a]),c&&React.createElement(n,{onBackdropClick:s},c.render(c.resolvers))||null},exports.useModal=function(){const{launchModal:e}=r();return e},exports.useModalContext=r;
