import e,{useState as t,useContext as n,createContext as r,useMemo as c,useCallback as a,useEffect as o}from"react";const l=r({stack:[],launchModal:()=>{},updateStack:()=>{},updateState:()=>{}}),s=({children:n})=>{const[r,c]=t([]),a={stack:r,launchModal:(e,t,n)=>{const a=Object.keys(t).reduce(((e,n)=>{const a=t[n];return e[n]=async e=>{const t=await a(e);return c(r.slice(0,-1)),t},e}),{});c([...r,{render:e,resolvers:a,onBackdropClickUse:n,state:{}}])},updateStack:c,updateState:e=>{const t=[...r];t[r.length-1].state={...e},c(t)}};return e.createElement(l.Provider,{value:a},n)};function u(){return n(l)}function d(){const{launchModal:e}=u();return e}const k=({onModalLaunch:e,onModalClose:t,render:n})=>{const{stack:r}=u(),l=c((()=>r.length>0?r[r.length-1]:null),[r]),s=a((e=>{e.currentTarget===e.target&&l?.onBackdropClickUse&&l.resolvers[l.onBackdropClickUse](e)}),[l]);return o((()=>{l?e&&e():t&&t()}),[l,e,t]),l&&React.createElement(n,{onBackdropClick:s},l.render(l.resolvers))||null};export{s as ModalContextProvider,k as ModalPort,d as useModal,u as useModalContext};
